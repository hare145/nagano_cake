<% if current_page? "/items?genre_id=#{params[:genre_id]}" %>
  <div class="h-75">
    <div class="container mt-5">
      <div class="row">
        <div class="col-3">
          <%= render 'public/shared/genre', genres: @genres %>
        </div>
        <div class="col-9">
          <div class="d-flex">
            <h2 class="m-2"><%= Genre.find(params[:genre_id]).name %>一覧</h2>
            <h4 class="mt-3">(全<%= @item_genre_count %>件)</h4>
          </div>
          <div class="row">
            <% @item_genre.each do |item| %>
            <table class="table table-borderless col-3">
              <th>
                <%= link_to image_tag(item.get_image(200, 100 )), item_path(item.id) %>
              </th>
              <tr>
                <td>
                  <%= item.name %>
                </td>
              </tr>
              <tr>
                <td>
                  ￥<%= (item.price * 1.1).floor.to_s(:delimited) %>
                </td>
              </tr>
            </table>
            <% end %>
          </div>
      </div>
    </div>
  </div>
  <div class="container">
    <div class="row justify-content-center mb-3">
      <%= paginate @items %>
    </div>
  </div>
</div>

<% else %>
  <div class="h-75">
    <div class="container mt-5">
      <div class="row">
        <div class="col-3">
          <%= render 'public/shared/genre', genres: @genres %>
        </div>
        <div class="col-9">
          <div class="d-flex">
            <h2 class="m-2">商品一覧</h2>
            <h4 class="mt-3">(全<%= @item_count %>件)</h4>
          </div>
          <div class="row">
            <% @items.each do |item| %>
              <table class="table table-borderless col-3 ">
                <th>
                  <%= link_to image_tag(item.get_image(200, 100 )), item_path(item.id) %>
                </th>
                <tr>
                  <div class="text-left">
                    <td>
                      <%= item.name %>
                    </td>
                  </div>
                </tr>
                <tr>
                  <div class="text-left">
                    <td>
                      ￥<%= (item.price * 1.1).floor.to_s(:delimited) %>
                    </td>
                  </div>
                </tr>
              </table>
            <% end %>
          </div>
        </div>
      </div>
    </div>
   <div class="container">
      <div class="row justify-content-center mb-3">
        <%= paginate @items %>
      </div>
    </div>
  </div>
<% end %>

